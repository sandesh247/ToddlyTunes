/**
 * Particle Effects - Sparkle and stars on correct key presses
 */

/* Container for particles spawned from a key */
.particle-container {
    position: absolute;
    pointer-events: none;
    z-index: 100;
    overflow: visible;
}

/* Individual particle base */
.particle {
    position: absolute;
    pointer-events: none;
    animation-fill-mode: forwards;
}

/* Star particle */
.particle-star {
    font-size: 1.5rem;
    animation: particle-burst 0.8s ease-out forwards;
}

/* Sparkle particle */
.particle-sparkle {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: radial-gradient(circle, white 0%, transparent 70%);
    box-shadow: 0 0 6px 2px currentColor;
    animation: particle-sparkle 0.6s ease-out forwards;
}

/* Musical note particle */
.particle-note {
    font-size: 1.2rem;
    opacity: 0.9;
    animation: particle-float 1s ease-out forwards;
}

/* Confetti particle */
.particle-confetti {
    width: 8px;
    height: 8px;
    animation: particle-confetti 0.8s ease-out forwards;
}

/* ============ Animations ============ */

@keyframes particle-burst {
    0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(0.5);
    }

    50% {
        opacity: 1;
    }

    100% {
        opacity: 0;
        transform: translate(calc(-50% + var(--dx)),
                calc(-50% + var(--dy))) scale(1.2);
    }
}

@keyframes particle-sparkle {
    0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }

    100% {
        opacity: 0;
        transform: translate(calc(-50% + var(--dx)),
                calc(-50% + var(--dy))) scale(0.2);
    }
}

@keyframes particle-float {
    0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(0.8) rotate(0deg);
    }

    100% {
        opacity: 0;
        transform: translate(calc(-50% + var(--dx)),
                calc(-50% + var(--dy) - 40px)) scale(1.1) rotate(var(--rotate, 15deg));
    }
}

@keyframes particle-confetti {
    0% {
        opacity: 1;
        transform: translate(-50%, -50%) rotate(0deg) scale(1);
    }

    100% {
        opacity: 0;
        transform: translate(calc(-50% + var(--dx)),
                calc(-50% + var(--dy) + 30px)) rotate(var(--rotate)) scale(0.5);
    }
}

/* ============ Celebratory burst for song completion ============ */

.celebration-particles {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1000;
    overflow: hidden;
}

.celebration-particles .particle {
    animation-duration: 1.5s;
}